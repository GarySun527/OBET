{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}OBET - Search For Literature{% endblock %}
{% block page_content %}

<head>

</head> 

<div class="page-header">
 <h1>Search For Literature</h1>	
</div>

<meta id="searchString" data-name="{{searchString}}">
<meta id="sortString" data-name="{{sortString}}">

{% if searchTerm %}
  {% set searchString = searchTerm %}
{% endif %}

{{ wtf.quick_form(form) }}

<div class="container">
  <h2>Results</h2>
  <p>References that match your search query:</p>   

<table class="table" >  
    <thead>
      <tr>
		    {%if current_user.title or current_user.is_anonymous() %} <th> Title </th> {%endif%}
      	{%if current_user.author or current_user.is_anonymous() %} <th> Author </th> {%endif%}
        {%if current_user.primaryField or current_user.is_anonymous() %}<th> Primary Field </th> {%endif%}
        {%if current_user.sourceTitle or current_user.is_anonymous() %} <th> Source Title </th> {%endif%}
        {%if current_user.editor or current_user.is_anonymous() %} <th> Editor </th> {%endif%}
        {%if current_user.yearPublished or current_user.is_anonymous() %} <th> Year Published </th> {%endif%}
        {%if current_user.refType or current_user.is_anonymous() %} <th> Type </th> {%endif%}
        {%if current_user.creator%} <th> Creator </th> {%endif%}
        {%if current_user.dateCreatedOn or current_user.is_anonymous() %} <th> Date Created </th> {%endif%}
        {%if current_user.lastModified or current_user.is_anonymous() %} <th> Last Modified </th> {%endif%}
        {%if current_user.lastModifiedBy%} <th> Last Modified By </th> {%endif%}
      </tr>
 	</thread> 	
    <tbody>

    {% for l in lit %}

    	<tr>
    		{%if current_user.title or current_user.is_anonymous() %} <td><a href="{{ url_for('main.lit', lit_id = l.id) }}">{{l.title}}</a></td> {%endif%}
    		{%if current_user.author or current_user.is_anonymous() %}<td>{{l.author}}</td> {%endif%}
        {%if current_user.primaryField or current_user.is_anonymous() %}<td>{{l.primaryField}}</td> {%endif%}
    		{%if current_user.sourceTitle or current_user.is_anonymous() %}<td>{{l.sourceTitle}}</td> {%endif%}
        {%if current_user.editor or current_user.is_anonymous() %}<td>{{l.editor}}</td> {%endif%}    
        {%if current_user.yearPublished or current_user.is_anonymous() %}<td>{{l.yearPublished}}</td> {%endif%}
        {%if current_user.refType or current_user.is_anonymous() %} <td>{{l.refType}}</td> {%endif%}    
        {%if current_user.creator%}<td>{{l.creator}}</td> {%endif%}
        {%if current_user.dateCreatedOn or current_user.is_anonymous() %}<td>{{l.created_date}}</td> {%endif%}
        {%if current_user.lastModified or current_user.is_anonymous() %}<td>{{l.last_edit.date}}</td> {%endif%}
        {%if current_user.lastModifiedBy%}<td>{{l.last_edit.lastUserEdited}}</td> {%endif%}
    	</tr>
    {% endfor %}
    </tbody>
</table>
</div>

<br>
<br>
 
<!--  <br> 

<form id="sort" action="{{ url_for('main.search', searchStr = searchString) }}">
  Sort By:
  <select name="sortby">
      <option value="title" {% if selected %} {% set sortString = "title" %} {% endif %}> Title </option>
      <option value="type"> Type </option>
      <option value="author"> Author </option>
      <option value="primaryField"> Primary Field </option>
  </select>

</form> <button type="submit" form="sort" value="Sort"> Sort </button> -->

 <p>
 <br>
 Rather do an explicit search?
 <a href="{{ url_for('main.exactSearch') }}">
 Go here instead.
 </a>
</p>

<link rel="stylesheet" href="jquery-ui-themes-1.10.3/themes/smoothness/jquery-ui.css" />
<script src="jquery-1.10.1.js"></script>
<script src="jquery-ui.js"></script><script src="jquery-1.9.1.min.js"></script>

{% endblock %}


